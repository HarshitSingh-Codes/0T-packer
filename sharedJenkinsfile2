@Library("opstree-shared-library@packer+aws-cli") _

def nginx = new org.opstree.template.nginx.nginx()

node {
    
    def url = 'https://github.com/HarshitSingh-Codes/0T-packer.git'
    def creds = 'github-token'
    def branch = 'nginxV1.0'
    def packerFileName = '.'
    def amiVersion = '0.6'
    def templateID = 'lt-0e0cf0cd693670427'
    def asgConfig = 'config.json'
    def sourceVersion = '4'

    nginx.checkout(url, creds, branch)

    // nginx.runPacker(packerFileName, amiVersion)

    nginx.updateLaunchTemplate(templateID, sourceVersion)

    nginx.instanceRefresh(asgConfig)
}
